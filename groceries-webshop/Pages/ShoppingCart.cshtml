@page
@model groceries_webshop.Pages.ShoppingCartModel
@inject groceries_webshop.Data.AccessControl accessControl
@{
    <h1>My Shopping Cart</h1>

    <table id="shoppingcart-table">

        @{
            if (Model.Account.ShoppingCart.Count > 0)
            {
                <thead>
                    <tr><th>Name</th></tr>
                    <tr><th>Unit price</th></tr>
                    <tr><th>Total price</th></tr>
                    <tr><th>Image</th></tr>
                </thead>

            }
            else
            {
                <tr><th id="empty-message">Your shopping cart is empty.</th></tr>
            }
        }

        <tbody>
            @{
                if (Model.Account.ShoppingCart.Count > 0)
                {
                    foreach (var product in Model.Account.ShoppingCart)
                    {
                        <tr><td>product.Name</td></tr>
                        <tr><td>product.Price</td></tr>
                        <tr><td>product.Price</td></tr>
                        <tr><td>product.Image</td></tr>
                    }
                }
            }
        </tbody>
    </table>

    @if (Model.Account.ShoppingCart.Count > 0)
    {
        <h2>Total: @Model.GetTotal() VEF</h2>
    }

    <section id="shoppingcart-buttons">
        <button id="empty-cart-button" onclick="@{
        if (Model.Account.ShoppingCart.Count > 0) {
            Model.Account.ShoppingCart.Clear();
        }
            }">
            <img src="images/empty-shoppingcart-icon.svg" alt="Empty shopping cart icon" />
            Empty cart
        </button>

        <a id="checkout-button" asp-page="/OrderConfirmation" asp-route-id="@accessControl.LoggedInAccountID"><img src="images/checkout-icon.svg" alt="Checkout icon" />Checkout</a>
    </section>

}