@page
@model groceries_webshop.Pages.ShoppingCartModel
@inject groceries_webshop.Data.AccessControl accessControl
@{
    ViewData["Title"] = "Shopping Cart";
}

<h1>My Shopping Cart</h1>

<table id="shoppingcart-table">

    <thead>
        @{
            if (Model.Products.Count > 0)
            {
                <tr id="table-headings">
                    <th>Name</th>
                    <th>Unit price</th>
                    <th>Total price</th>
                    <th>Image</th>
                </tr>
            }
            else
            {
                <tr><th id="empty-message">Your shopping cart is empty.</th></tr>
            }
        }
    </thead>

    <tbody>
        @{
            if (Model.Products.Count > 0)
            {
                foreach (var product in Model.Products)
                {
                    <tr class="table-cells">
                        <td>@product.Name</td>
                        <td>@product.Price</td>
                        <td>@product.Price</td>
                        <td>@product.Image</td>
                    </tr>
                }
            }
        }
    </tbody>
</table>

@if (Model.Products.Count > 0)
{
    <h2>Total: @Model.GetTotal() VEF</h2>
}

<section id="shoppingcart-buttons">
    <form method="post" asp-route-id="@accessControl.LoggedInAccountID">
        <button id="empty-cart-button" type="submit">
            <img src="images/empty-shoppingcart-icon.svg" alt="Empty shopping cart icon" />
            Empty cart
        </button>
    </form>

    <a id="checkout-button" asp-page="/OrderConfirmation" asp-route-id="@accessControl.LoggedInAccountID">
        <img src="images/checkout-icon.svg" alt="Checkout icon" />Checkout</a>
</section>
